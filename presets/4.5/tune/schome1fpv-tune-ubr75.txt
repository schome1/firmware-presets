#$ TITLE: Schome1FPV - UBR75 TUNE
#$ FIRMWARE_VERSION: 4.5
#$ CATEGORY: TUNE
#$ STATUS: EXPERIMENTAL
#$ KEYWORDS: ubr, ubr75, 40mm, whoop
#$ AUTHOR: Schome1FPV (Mike Schommer)

#$ DESCRIPTION: Presets for the UBR75 drone tune.

# dynamic idle = (15000 / <prop size in inches>) / 100)
set dyn_idle_min_rpm = 95

# thrust linear = (<esc pwm frequency> >= 96 ? 40 : (userValue <= 24 ? 0 : 20));
set thrust_linear = 40;

set crash_recovery = OFF
set acc_hardware = AUTO

#$ OPTION BEGIN (CHECKED): Use Crash Recovery
    set crash_recovery = ON
#$ OPTION END

set throttle_limit_type = OFF
set throttle_limit_percent = 100

#$ OPTION_GROUP BEGIN: Choose ONE Throttle Limit
    #$ OPTION BEGIN (CHECKED): 100%
        set throttle_limit_type = OFF
        set throttle_limit_percent = 100
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 95%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 95
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 90%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 90
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 85%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 85
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 80%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 80
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 75%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 75
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 70%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 70
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 65%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 65
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 60%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 60
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 55%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 55
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): 50%
        set throttle_limit_type = SCALE
        set throttle_limit_percent = 50
    #$ OPTION END
#$ OPTION_GROUP END

# master
set small_angle = 180

set simplified_gyro_filter_multiplier = 60

set motor_pwm_protocol = DSHOT300
set motor_poles = 12
set yaw_motors_reversed = ON
set dshot_bidir = ON
set min_check = 1020
set max_check = 2000

set acc_lpf_hz = 10

set dyn_notch_count = 2
set dyn_notch_max_hz = 700

set gyro_lpf1_static_hz = 150
set gyro_lpf2_static_hz = 300
set gyro_lpf1_dyn_min_hz = 150
set gyro_lpf1_dyn_max_hz = 300

set rc_smoothing_auto_factor = 25
set rc_smoothing_auto_factor_throttle = 25

set pid_process_denom = 4

set rpm_filter_harmonics = 2

set debug_mode = GYRO_SCALED
set blackbox_sample_rate = 1/2

profile 0

# profile 0
set dterm_lpf1_dyn_min_hz = 90
set dterm_lpf1_dyn_max_hz = 180
set dterm_lpf1_static_hz = 90
set dterm_lpf2_static_hz = 180
set vbat_sag_compensation = 100
set anti_gravity_gain = 90
set iterm_relax_cutoff = 5
set pidsum_limit = 1000
set pidsum_limit_yaw = 1000
set yaw_lowpass_hz = 125

set p_pitch = 65
set i_pitch = 116
set d_pitch = 61
set f_pitch = 247
set p_roll = 56
set i_roll = 100
set d_roll = 54
set f_roll = 216
set p_yaw = 56
set i_yaw = 100
set f_yaw = 216

set angle_level_strength = 100

set d_min_roll = 54
set d_min_pitch = 61

set thrust_linear = 20

set feedforward_averaging = 2_POINT
set feedforward_smooth_factor = 65
set feedforward_jitter_factor = 3
set feedforward_boost = 18

set dyn_idle_min_rpm = 94

set simplified_master_multiplier = 180
set simplified_pi_gain = 70
set simplified_dmax_gain = 0
set simplified_pitch_pi_gain = 110
set simplified_dterm_filter_multiplier = 120

rateprofile 0

# rateprofile 0
set roll_rc_rate = 40
set pitch_rc_rate = 30
set yaw_rc_rate = 40
set roll_srate = 40
set pitch_srate = 30
set yaw_srate = 40
